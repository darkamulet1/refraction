{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "dashas_vimshottari_spec_v1",
  "type": "object",
  "required": ["meta", "person", "config_echo", "frames"],
  "properties": {
    "meta": {
      "type": "object",
      "required": ["schema_version", "timestamp_utc"],
      "properties": {
        "schema_version": {
          "type": "string",
          "const": "dashas_vimshottari_spec_v1"
        },
        "timestamp_utc": { "type": "string" }
      },
      "additionalProperties": true
    },
    "person": {
      "type": "object",
      "required": ["birth_date", "birth_time", "timezone"],
      "properties": {
        "name": { "type": ["string", "null"] },
        "birth_date": { "type": "string" },
        "birth_time": { "type": "string" },
        "timezone": { "type": "string" }
      },
      "additionalProperties": true
    },
    "config_echo": {
      "type": "object",
      "required": ["zodiac_type", "house_system", "node_mode"],
      "properties": {
        "zodiac_type": { "type": "string" },
        "ayanamsa_mode": { "type": ["string", "null"] },
        "ayanamsa_value_deg": { "type": ["number", "null"] },
        "house_system": { "type": "string" },
        "node_mode": { "type": "string" }
      },
      "additionalProperties": true
    },
    "frames": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["frame_id", "levels"],
        "properties": {
          "frame_id": { "type": "string" },
          "description": { "type": ["string", "null"] },
          "levels": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["level", "periods"],
              "properties": {
                "level": { "type": "string" },
                "periods": {
                  "type": "array",
                  "minItems": 1,
                  "items": {
                    "type": "object",
                    "required": ["order_index", "planet_id", "start", "end", "duration_years"],
                    "properties": {
                      "order_index": { "type": "integer" },
                      "planet_id": { "type": "string" },
                      "start": { "type": "string" },
                      "end": { "type": "string" },
                      "duration_years": { "type": "number" }
                    },
                    "additionalProperties": true
                  }
                }
              },
              "additionalProperties": true
            }
          }
        },
        "additionalProperties": true
      }
    }
  },
  "additionalProperties": false
}
